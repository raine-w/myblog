# 🎨 魔法粒子系统 - 使用指南

## 快速开始

魔法粒子系统已集成到网站背景中，无需额外配置即可使用。

---

## 🖱️ 交互方式

### 1. 鼠标移动

**慢速移动**（推荐）:
- 将鼠标缓慢地在屏幕上移动
- 观察粒子如何围绕鼠标旋转
- 注意颜色的渐变变化

**快速移动**:
- 快速挥动鼠标
- 创造流动的尾迹效果
- 产生更剧烈的颜色变化

**画圈**:
- 用鼠标画圆圈
- 观察涡流效果
- 粒子会跟随圆形轨迹

### 2. 停留观察

**静止鼠标**:
- 将鼠标停在某处
- 粒子会继续自然流动
- 颜色会逐渐稳定

**无鼠标活动**:
- 粒子保持自然流场运动
- 创造宁静的背景效果

---

## 🎭 视觉效果展示

### 效果1: 彩虹旋涡 🌈

**操作**: 
1. 将鼠标移到屏幕中央
2. 缓慢地画圆圈
3. 观察周围粒子形成彩色旋涡

**预期效果**:
- 粒子围绕鼠标旋转
- 颜色快速变化，形成彩虹效果
- 靠近鼠标的粒子更亮、更大

### 效果2: 粒子尾迹 💫

**操作**:
1. 从屏幕左侧快速移动到右侧
2. 观察粒子的拖尾效果
3. 尝试不同的移动速度

**预期效果**:
- 快速移动时产生明显尾迹
- 粒子在轨迹上波动
- 尾迹逐渐消散

### 效果3: 能量爆发 ✨

**操作**:
1. 快速在粒子密集区域挥动鼠标
2. 观察粒子亮度变化
3. 停止移动，看能量逐渐衰减

**预期效果**:
- 粒子被激活，变得更亮
- 颜色更鲜艳
- 大小增加

### 效果4: 流体运动 🌊

**操作**:
1. 缓慢地做"S"形移动
2. 观察粒子的流动轨迹
3. 体验流体般的视觉效果

**预期效果**:
- 粒子沿着S形路径流动
- 产生波浪般的运动
- 颜色平滑过渡

---

## 🎨 颜色变化说明

### 颜色系统

粒子使用HSL颜色空间：
- **H (色相)**: 0-360°，决定颜色类型
- **S (饱和度)**: 70-90%，决定颜色鲜艳度
- **L (亮度)**: 50-80%，决定颜色明暗

### 颜色变化时机

1. **持续变化**: 所有粒子色相缓慢旋转
2. **鼠标交互**: 靠近鼠标时快速变化
3. **能量影响**: 高能量粒子更亮、更鲜艳
4. **速度影响**: 鼠标移动越快，颜色变化越快

### 颜色梯度

```
🔴 红色 (0°)
🟠 橙色 (30°)
🟡 黄色 (60°)
🟢 绿色 (120°)
🔵 蓝色 (240°)
🟣 紫色 (300°)
🔴 返回红色 (360°)
```

---

## ⚙️ 自定义配置（开发者）

### 调整粒子数量

```typescript
// ThreeBackground.tsx
<MagicParticles count={2500} /> // 修改这个数字

// 推荐值:
// 低端设备: 1000-1500
// 中端设备: 1500-2500
// 高端设备: 2500-5000
```

### 调整交互半径

```typescript
// 在 MagicParticles 组件中
const interactionRadius = 15; // 修改这个值

// 推荐值:
// 小半径 (精确): 8-12
// 中等半径 (默认): 12-18
// 大半径 (广泛): 18-25
```

### 调整颜色主题

```typescript
// 修改初始色相范围
data[i10 + 8] = Math.random() * 360; // 全彩虹

// 特定颜色范围示例:
// 蓝绿主题: Math.random() * 120 + 120
// 暖色主题: Math.random() * 60
// 冷色主题: Math.random() * 120 + 180
```

### 调整运动速度

```typescript
// 流场强度
vx += flowX * 0.6; // 修改 0.6
vy += flowY * 0.6;

// 摩擦系数
vx *= 0.96; // 修改 0.96 (越接近1，运动越持久)
```

---

## 🎯 性能建议

### 最佳实践

1. **桌面端**: 
   - 粒子数量: 2000-3000
   - 交互半径: 15-18
   - 期望帧率: 60 FPS

2. **移动端**: 
   - 粒子数量: 1000-1500
   - 交互半径: 12-15
   - 期望帧率: 50-60 FPS

3. **低端设备**:
   - 粒子数量: 500-1000
   - 交互半径: 10-12
   - 期望帧率: 30-50 FPS

### 性能监控

使用浏览器开发工具监控性能：
```
Chrome DevTools > Performance
- 检查帧率
- 查看渲染时间
- 分析内存使用
```

---

## 🐛 故障排除

### 问题1: 粒子不显示

**检查**:
1. Canvas 是否正确加载
2. Three.js 依赖是否安装
3. 浏览器是否支持 WebGL

**解决**:
```bash
# 重新安装依赖
npm install

# 检查浏览器支持
访问: https://get.webgl.org/
```

### 问题2: 性能问题

**症状**:
- 帧率低于 30 FPS
- 鼠标移动卡顿
- 浏览器响应慢

**解决**:
```typescript
// 降低粒子数量
<MagicParticles count={1000} />

// 或使用性能模式
const particleCount = /mobile/i.test(navigator.userAgent) ? 800 : 2500;
```

### 问题3: 颜色异常

**症状**:
- 颜色不变化
- 颜色全白或全黑

**检查**:
1. 确认 HSL 值在正确范围
2. 检查 shader 是否正确编译
3. 查看浏览器控制台错误

---

## 🎨 创意使用案例

### 案例1: 品牌配色

**场景**: 使用品牌颜色作为粒子主题

```typescript
// 例如：蓝色品牌
const brandHue = 200; // 蓝色
data[i10 + 8] = brandHue + (Math.random() - 0.5) * 40;
```

### 案例2: 节日主题

**圣诞节**:
```typescript
// 红色和绿色
data[i10 + 8] = Math.random() > 0.5 ? 0 : 120;
```

**万圣节**:
```typescript
// 橙色和紫色
data[i10 + 8] = Math.random() > 0.5 ? 30 : 300;
```

### 案例3: 时间主题

**白天**: 明亮、暖色调
```typescript
// 早上：黄色偏向
const hue = 45 + Math.random() * 30;
const lightness = 0.6 + Math.random() * 0.2;
```

**夜晚**: 深邃、冷色调
```typescript
// 夜间：蓝紫色
const hue = 220 + Math.random() * 60;
const lightness = 0.4 + Math.random() * 0.2;
```

---

## 📱 移动端优化

### 触摸事件

粒子系统自动响应触摸：
- **单指滑动**: 等同于鼠标移动
- **快速滑动**: 产生尾迹效果
- **多点触摸**: 使用第一个触摸点

### 移动端特别优化

自动检测设备类型并调整：
```typescript
const isMobile = /mobile/i.test(navigator.userAgent);
const count = isMobile ? 1200 : 2500;
```

---

## 🎓 学习资源

### Three.js 相关
- [Three.js 官方文档](https://threejs.org/docs/)
- [React Three Fiber](https://docs.pmnd.rs/react-three-fiber)

### WebGL Shaders
- [The Book of Shaders](https://thebookofshaders.com/)
- [ShaderToy](https://www.shadertoy.com/)

### 粒子系统
- [Particles.js](https://vincentgarreau.com/particles.js/)
- [GPU Particles](https://threejs.org/examples/webgl_gpu_particle_system.html)

---

## ✅ 检查清单

部署前确认：

- [ ] 粒子正常显示
- [ ] 鼠标交互流畅
- [ ] 颜色变化正常
- [ ] 帧率稳定（> 50 FPS）
- [ ] 移动端适配
- [ ] 浏览器兼容性测试
- [ ] 无控制台错误

---

**提示**: 最佳观看效果建议在桌面浏览器上体验，使用鼠标慢速移动以观察细腻的视觉效果。

**文档版本**: 1.0  
**最后更新**: 2026-01-31  
**反馈**: 如有问题或建议，请提交 Issue
